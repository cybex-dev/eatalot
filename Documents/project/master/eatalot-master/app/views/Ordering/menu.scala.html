@import java.util

@import helper._
@import models.Order.Meal
@import controllers.Application.AppTags
@(meals: util.List[Meal], menuType: Integer)

<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width">
    </head>
    <body>
        @if(session.get("display_name") == null){
            <a href="@controllers.User.routes.UserController.login()">Sign up</a>
        } else{
            <p>Welcome @session.get("display_name")</p>
            <a href="@controllers.Order.routes.AccountController.doSignOut()">Sign out</a>
        }

        @*<a href="@routes.OrderController.getAddMealToMenu()">Add Order</a>*@
        <h1>Menu</h1>
        <table>
            <tr><td><a href="@controllers.Application.routes.HomeController.index()">Home</a></td></tr>
            <tr><td><a href="@controllers.Order.routes.OrderController.getCart()">Checkout</a></td></tr>
        </table>
        <table>
            @menuType
            <tr><td><a href="@controllers.Order.routes.OrderController.switchMenu(0)">Breakfast</a></td></tr>
            <tr><td><a href="@controllers.Order.routes.OrderController.switchMenu(1)">Lunch</a></td></tr>
            <tr><td><a href="@controllers.Order.routes.OrderController.switchMenu(2)">Dinner</a></td></tr>
        </table>
        @if(meals.size() == 0){
            <p>List is empty</p>
        } else {
            @for(x <- 0 until meals.size) {
                @form(CSRF(controllers.Order.routes.OrderController.addMealToOrder(meals.get(x).getMealId()))) {
                    @*<form action="@routes.OrderController.addMealToOrder(meals.get(x).getMealId())" method="post">*@
                    <table>
                        <tr>
                            <td>Meal</td>
                            <td>Price</td>
                            <td>Status</td>
                        </tr>
                        <tr>
                            <td>@meals.get(x).getDescription()</td>
                            <td>@meals.get(x).getCost()</td>
                            <td>$$Status</td>
                        </tr>
                        <tr>
                            <td><img src="@routes.Assets.versioned("images/menu/" + meals.get(x).getImage)"/> $$Image</td>
                            <td></td>
                            <td><button type="submit">Add to order</button></td>
                        </tr>
                    </table>
                    @*</form>*@
                }
            }
        }
    </body>
</html>